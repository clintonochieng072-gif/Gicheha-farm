"use strict";(self.webpackChunkgicheha_farm_frontend=self.webpackChunkgicheha_farm_frontend||[]).push([[11],{11:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(43),r=t(216),o=t(862),n=t(579);const d=()=>{const{token:e}=(0,r.g)(),s=(0,r.Zp)(),[t,d]=(0,a.useState)(""),[c,i]=(0,a.useState)(""),[l,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[p,w]=(0,a.useState)("");return(0,n.jsxs)("div",{className:"max-w-md mx-auto card",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Set New Password"}),p&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:p}),u&&(0,n.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:u}),(0,n.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),w(""),h(""),t===c)if(t.length<6)w("Password must be at least 6 characters");else{m(!0);try{await o.A.post("/admin/reset-password/".concat(e),{password:t}),h("Password reset successfully! Redirecting to login..."),setTimeout(()=>{s("/admin")},2e3)}catch(p){var r,n;w((null===(r=p.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to reset password")}finally{m(!1)}}else w("Passwords do not match")},children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700 mb-2",children:"New Password"}),(0,n.jsx)("input",{type:"password",id:"password",value:t,onChange:e=>d(e.target.value),className:"input-field",placeholder:"Enter new password",required:!0,minLength:6})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Confirm New Password"}),(0,n.jsx)("input",{type:"password",id:"confirmPassword",value:c,onChange:e=>i(e.target.value),className:"input-field",placeholder:"Confirm new password",required:!0,minLength:6})]}),(0,n.jsx)("button",{type:"submit",className:"w-full btn-primary",disabled:l,children:l?"Resetting...":"Reset Password"})]})]})}},862:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(722);const r=a.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"/public",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});r.interceptors.request.use(e=>{const s=localStorage.getItem("accessToken");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{var s,t,o;const n=e.config;if(401===(null===(s=e.response)||void 0===s?void 0:s.status)&&"TOKEN_EXPIRED"===(null===(t=e.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)&&!n._retry){n._retry=!0;try{const e=await a.A.post("".concat(r.defaults.baseURL,"/admin/refresh-token"),{},{withCredentials:!0}),{accessToken:s}=e.data;return localStorage.setItem("accessToken",s),n.headers.Authorization="Bearer ".concat(s),r(n)}catch(d){return localStorage.removeItem("accessToken"),Promise.reject(d)}}return Promise.reject(e)});const o=r}}]);
//# sourceMappingURL=11.2f29bd3b.chunk.js.map