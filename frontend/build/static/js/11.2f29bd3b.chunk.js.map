{"version":3,"file":"static/js/11.2f29bd3b.chunk.js","mappings":"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","sources":["components/ResetPassword.js","utils/api.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport api from \"../utils/api\";\n\nconst ResetPassword = () => {\n  const { token } = useParams();\n  const navigate = useNavigate();\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setMessage(\"\");\n\n    if (password !== confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    if (password.length < 6) {\n      setError(\"Password must be at least 6 characters\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      await api.post(`/admin/reset-password/${token}`, { password });\n      setMessage(\"Password reset successfully! Redirecting to login...\");\n      setTimeout(() => {\n        navigate(\"/admin\");\n      }, 2000);\n    } catch (error) {\n      setError(error.response?.data?.message || \"Failed to reset password\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto card\">\n      <h2 className=\"text-2xl font-bold text-center mb-6\">Set New Password</h2>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n\n      {message && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"password\"\n            className=\"block text-sm font-medium text-secondary-700 mb-2\"\n          >\n            New Password\n          </label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"input-field\"\n            placeholder=\"Enter new password\"\n            required\n            minLength={6}\n          />\n        </div>\n\n        <div className=\"mb-6\">\n          <label\n            htmlFor=\"confirmPassword\"\n            className=\"block text-sm font-medium text-secondary-700 mb-2\"\n          >\n            Confirm New Password\n          </label>\n          <input\n            type=\"password\"\n            id=\"confirmPassword\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            className=\"input-field\"\n            placeholder=\"Confirm new password\"\n            required\n            minLength={6}\n          />\n        </div>\n\n        <button type=\"submit\" className=\"w-full btn-primary\" disabled={loading}>\n          {loading ? \"Resetting...\" : \"Reset Password\"}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ResetPassword;\n","import axios from \"axios\";\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000/api\",\n  withCredentials: true, // Important for cookies\n  headers: {\n    \"Cache-Control\": \"no-cache\",\n    Pragma: \"no-cache\",\n    Expires: \"0\",\n  },\n});\n\n// Request interceptor to add access token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"accessToken\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (\n      error.response?.status === 401 &&\n      error.response?.data?.code === \"TOKEN_EXPIRED\" &&\n      !originalRequest._retry\n    ) {\n      originalRequest._retry = true;\n\n      try {\n        // Attempt to refresh token\n        const refreshResponse = await axios.post(\n          `${api.defaults.baseURL}/admin/refresh-token`,\n          {},\n          { withCredentials: true }\n        );\n\n        const { accessToken } = refreshResponse.data;\n\n        // Store new access token\n        localStorage.setItem(\"accessToken\", accessToken);\n\n        // Retry original request with new token\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n        return api(originalRequest);\n      } catch (refreshError) {\n        // Refresh failed, redirect to login\n        localStorage.removeItem(\"accessToken\");\n        // Instead of redirecting, just reject the error to let the component handle it\n        return Promise.reject(refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"names":["ResetPassword","token","useParams","navigate","useNavigate","password","setPassword","useState","confirmPassword","setConfirmPassword","loading","setLoading","message","setMessage","error","setError","_jsxs","className","children","_jsx","onSubmit","async","e","preventDefault","length","api","post","concat","setTimeout","_error$response","_error$response$data","response","data","htmlFor","type","id","value","onChange","target","placeholder","required","minLength","disabled","axios","create","baseURL","process","REACT_APP_API_URL","withCredentials","headers","Pragma","Expires","interceptors","request","use","config","localStorage","getItem","Authorization","Promise","reject","_error$response2","_error$response2$data","originalRequest","status","code","_retry","refreshResponse","defaults","accessToken","setItem","refreshError","removeItem"],"sourceRoot":""}