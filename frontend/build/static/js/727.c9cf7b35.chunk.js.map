{"version":3,"file":"static/js/727.c9cf7b35.chunk.js","mappings":"wLAGA,MA4EA,EA5EuBA,KACrB,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAASC,IAAcJ,EAAAA,EAAAA,UAAS,IAmBvC,OACEK,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBC,SAAA,EACpCC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAAC,mBAEnDJ,IACCK,EAAAA,EAAAA,KAAA,OACEF,UAAS,0BAAAG,OACPN,EAAQO,SAAS,QACb,sDACA,iDACHH,SAEFJ,KAILE,EAAAA,EAAAA,MAAA,QAAMM,SAjCWC,UACnBC,EAAEC,iBACFZ,GAAW,GACXE,EAAW,IAEX,UACQW,EAAAA,EAAIC,KAAK,yBAA0B,CAAElB,UAC3CM,EACE,6EAEJ,CAAE,MAAOa,GACPb,EAAW,gDACb,CAAC,QACCF,GAAW,EACb,GAmB+BK,SAAA,EAC3BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEU,QAAQ,QACRZ,UAAU,oDAAmDC,SAC9D,mBAGDC,EAAAA,EAAAA,KAAA,SACEW,KAAK,QACLC,GAAG,QACHC,MAAOvB,EACPwB,SAAWT,GAAMd,EAASc,EAAEU,OAAOF,OACnCf,UAAU,cACVkB,YAAY,mBACZC,UAAQ,QAIZjB,EAAAA,EAAAA,KAAA,UACEW,KAAK,SACLb,UAAU,0BACVoB,SAAUzB,EAAQM,SAEjBN,EAAU,aAAe,wBAI9BO,EAAAA,EAAAA,KAAA,UACEmB,QAASA,IAAMC,OAAOC,QAAQC,OAC9BxB,UAAU,mEAAkEC,SAC7E,qB,8CCrEP,MAAMQ,EAAMgB,EAAAA,EAAMC,OAAO,CACvBC,QAASC,CAAAA,SAAAA,aAAAA,WAAAA,UAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYC,mBAAqB,4BAC1CC,iBAAiB,EACjBC,QAAS,CACP,gBAAiB,WACjBC,OAAQ,WACRC,QAAS,OAKbxB,EAAIyB,aAAaC,QAAQC,IACtBC,IACC,MAAMC,EAAQC,aAAaC,QAAQ,eAInC,OAHIF,IACFD,EAAON,QAAQU,cAAa,UAAAtC,OAAamC,IAEpCD,GAER1B,GAAU+B,QAAQC,OAAOhC,IAI5BF,EAAIyB,aAAaU,SAASR,IACvBQ,GAAaA,EACdtC,UAAkB,IAADuC,EAAAC,EAAAC,EACf,MAAMC,EAAkBrC,EAAM0B,OAE9B,GAC6B,OAAb,QAAdQ,EAAAlC,EAAMiC,gBAAQ,IAAAC,OAAA,EAAdA,EAAgBI,SACe,mBAAjB,QAAdH,EAAAnC,EAAMiC,gBAAQ,IAAAE,GAAM,QAANC,EAAdD,EAAgBI,YAAI,IAAAH,OAAN,EAAdA,EAAsBI,QACrBH,EAAgBI,OACjB,CACAJ,EAAgBI,QAAS,EAEzB,IAEE,MAAMC,QAAwB5B,EAAAA,EAAMf,KAAK,GAADP,OACnCM,EAAI6C,SAAS3B,QAAO,wBACvB,CAAC,EACD,CAAEG,iBAAiB,KAGf,YAAEyB,GAAgBF,EAAgBH,KAOxC,OAJAX,aAAaiB,QAAQ,cAAeD,GAGpCP,EAAgBjB,QAAQU,cAAa,UAAAtC,OAAaoD,GAC3C9C,EAAIuC,EACb,CAAE,MAAOS,GAIP,OAFAlB,aAAamB,WAAW,eAEjBhB,QAAQC,OAAOc,EACxB,CACF,CAEA,OAAOf,QAAQC,OAAOhC,KAI1B,S","sources":["components/ForgotPassword.js","utils/api.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport api from \"../utils/api\";\n\nconst ForgotPassword = () => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      await api.post(\"/admin/forgot-password\", { email });\n      setMessage(\n        \"If an account with that email exists, a password reset link has been sent.\"\n      );\n    } catch (error) {\n      setMessage(\"Failed to send reset email. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto card\">\n      <h2 className=\"text-2xl font-bold text-center mb-6\">Reset Password</h2>\n\n      {message && (\n        <div\n          className={`px-4 py-3 rounded mb-4 ${\n            message.includes(\"sent\")\n              ? \"bg-green-100 border border-green-400 text-green-700\"\n              : \"bg-red-100 border border-red-400 text-red-700\"\n          }`}\n        >\n          {message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"email\"\n            className=\"block text-sm font-medium text-secondary-700 mb-2\"\n          >\n            Email Address\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"input-field\"\n            placeholder=\"Enter your email\"\n            required\n          />\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"w-full btn-primary mb-4\"\n          disabled={loading}\n        >\n          {loading ? \"Sending...\" : \"Send Reset Link\"}\n        </button>\n      </form>\n\n      <button\n        onClick={() => window.history.back()}\n        className=\"w-full text-primary-600 hover:text-primary-800 text-sm underline\"\n      >\n        Back to Login\n      </button>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","import axios from \"axios\";\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000/api\",\n  withCredentials: true, // Important for cookies\n  headers: {\n    \"Cache-Control\": \"no-cache\",\n    Pragma: \"no-cache\",\n    Expires: \"0\",\n  },\n});\n\n// Request interceptor to add access token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"accessToken\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (\n      error.response?.status === 401 &&\n      error.response?.data?.code === \"TOKEN_EXPIRED\" &&\n      !originalRequest._retry\n    ) {\n      originalRequest._retry = true;\n\n      try {\n        // Attempt to refresh token\n        const refreshResponse = await axios.post(\n          `${api.defaults.baseURL}/admin/refresh-token`,\n          {},\n          { withCredentials: true }\n        );\n\n        const { accessToken } = refreshResponse.data;\n\n        // Store new access token\n        localStorage.setItem(\"accessToken\", accessToken);\n\n        // Retry original request with new token\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n        return api(originalRequest);\n      } catch (refreshError) {\n        // Refresh failed, redirect to login\n        localStorage.removeItem(\"accessToken\");\n        // Instead of redirecting, just reject the error to let the component handle it\n        return Promise.reject(refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"names":["ForgotPassword","email","setEmail","useState","loading","setLoading","message","setMessage","_jsxs","className","children","_jsx","concat","includes","onSubmit","async","e","preventDefault","api","post","error","htmlFor","type","id","value","onChange","target","placeholder","required","disabled","onClick","window","history","back","axios","create","baseURL","process","REACT_APP_API_URL","withCredentials","headers","Pragma","Expires","interceptors","request","use","config","token","localStorage","getItem","Authorization","Promise","reject","response","_error$response","_error$response2","_error$response2$data","originalRequest","status","data","code","_retry","refreshResponse","defaults","accessToken","setItem","refreshError","removeItem"],"sourceRoot":""}